function initStrings(){$("[data-string]").each(function(){$(this).html(App.strings[App.options.lang][$(this).attr("data-string")])})}function initBackbone(a){var b=Backbone.Router.extend({routes:{"":"home",home:"home",articles:"articles","articles/:articleId":"articles",aboutme:"aboutme",contact:"contact"},home:function(){new f("#template_home")},articles:function(a){App.articlesCollection=new d,App.articlesCollection.fetch({success:function(){new e(a),initStrings()}})},aboutme:function(){new f("#template_aboutme")},contact:function(){new f("#template_contact"),$(".js-contact-form").validator()}}),c=Backbone.Model.extend(),d=Backbone.Collection.extend({model:c,url:"data/articles.json",comparator:function(a,b){return-a.get("date").localeCompare(b.get("date"))}}),e=Backbone.View.extend({el:".js-main-content",initialize:function(a){this.render(a)},render:function(a){this.$el.html(_.template($("#template_articles").html(),{})),App.articlesCollection.each(function(a,b){$(".js-list-of-selectors").append(new g(a).$el),$(".js-list-of-articles").append(new h(a).$el),a!==App.articlesCollection.last()&&$(".js-list-of-articles").append("<hr>")}),updateArticlesSelectors(a),$(window).width()>767&&makeArticlesSelectorsFixed(),$("p").each(function(){var a=$(this);0==a.html().replace(/\s|&nbsp;/g,"").length&&a.remove()})}}),f=Backbone.View.extend({el:".js-main-content",initialize:function(a){this.render(a)},render:function(a){this.$el.hide().html(_.template($(a).html(),{})).fadeIn(500),initStrings()}}),g=Backbone.View.extend({tagName:"li",className:"clearfix list-of-selectors__selector",events:{click:function(){$("html, body").animate({scrollTop:$('.js-article[data-article-id="'+this.$el.attr("data-article-id")+'"]').offset().top-$(".js-navbar").height()-2},500,"easeOutCubic")}},initialize:function(a){this.render(a)},render:function(a){this.$el.html(_.template($("#template_article_selector").html())(a.toJSON())),this.$el.attr("data-article-id",a.get("id"))}}),h=Backbone.View.extend({tagName:"li",className:"list-of-articles__article article clearfix js-article",initialize:function(a){this.render(a)},render:function(a){this.$el.hide().html(_.template($("#template_article").html())(a.toJSON())).fadeIn(500),this.$el.attr("data-article-id",a.get("id")),this.$el.attr("id","article-"+a.get("id"))}});App.router=new b,Backbone.history.start(),App.router.on("route",function(){updateHeader(),window.scrollTo(0,0)})}function updateHeader(){var a=""===Backbone.history.getFragment()?App.options.defaultView:Backbone.history.getFragment();a.indexOf("articles")!==-1&&(a="articles"),$(".navbar-nav li").removeClass("active").filter('[data-view="'+a+'"]').addClass("active")}function updateArticlesSelectors(a){var a=a||App.articlesCollection.first().get("id");$(".js-list-of-selectors li").removeClass("active").filter('[data-article-id="'+a+'"]').addClass("active")}function makeArticlesSelectorsFixed(){var a=$(".js-articles-selectors").clone(!0);a.css({position:"fixed",top:$(".js-articles-selectors").offset().top,left:$(".js-articles-selectors").offset().left,width:$(".js-articles-selectors").outerWidth()}),$(".js-articles-selectors").css("visibility","hidden").after(a)}function sendEmail(){var a={};a.name=$(".js-contact-name").val(),a.email=$(".js-contact-email").val(),a.message=$(".js-contact-message").val(),$.post("email-sender.php",a,function(a,b,c){var d=$('<div class="screen-cover hide-this"><i class="screen-cover__btn-close fa fa-times js-screen-cover-btn-close" aria-hidden="true"></i><p class="screen-cover__message">Email correctly sent ! <br> We\'ll be in touch. :)</p></div>');$("body").append(d),d.fadeIn(500,function(){$(".js-screen-cover-btn-close").click(function(){window.location.href=App.options.homeUrl})})})}$(document).ready(function(){App={},App.options={lang:"eng",defaultView:"home",homeUrl:window.location.origin+window.location.pathname},$.get("data/strings.json",function(a){App.strings=a,initBackbone(),updateHeader()})});